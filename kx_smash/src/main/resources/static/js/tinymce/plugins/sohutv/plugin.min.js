tinymce.PluginManager.add("sohutv",function(a){function b(){var b,c,d={},e=a.selection,f=a.dom;b=e.getNode(),_thisEle=f.getParent(b,".mce-object"),d.vid=_thisEle?f.getAttrib(_thisEle,"vid"):"",d.bid=_thisEle?f.getAttrib(_thisEle,"bid"):"",d.width=_thisEle?f.getAttrib(_thisEle,"width"):"",d.height=_thisEle?f.getAttrib(_thisEle,"height"):"",c=a.windowManager.open({title:"Insert link",data:d,body:[{name:"vid",type:"textbox",label:"vid(vrs)",autofocus:!0,onchange:function(){d.vid=this.value()},onkeyup:function(){d.vid=this.value()}},{name:"bid",type:"textbox",label:"bid(ugc)",autofocus:!0,onchange:function(){d.bid=this.value()},onkeyup:function(){d.bid=this.value()}},{name:"width",type:"textbox",label:"\u5bbd(px)",onchange:function(){d.width=this.value()},onkeyup:function(){d.width=this.value()}},{name:"height",type:"textbox",label:"\u9ad8\uff08px\uff09",onchange:function(){d.height=this.value()},onkeyup:function(){d.height=this.value()}},{name:"rate",type:"textbox",label:"h5\u6bd4\u4f8b(16:9)",onchange:function(){d.rate=this.value()},onkeyup:function(){d.rate=this.value()}}],onSubmit:function(b){var c="sohuplayer"+Math.ceil(100*Math.random()),e=d.width,f=d.height,g={autoplay:!1,getHTML:1};if(d.vid?g.vid=d.vid:g.bid=d.bid,d.rate){var h=d.rate.split(":");g.width="100%",g.height="100%";var i=['<div class="mce-object" id="',c,'"></div><script type="text/javascript">',,'document.getElementById("',c,'").style.height=document.body.clientWidth*',h[1],"/",h[0],'+"px";','document.getElementById("',c,'").innerHTML = showVrsPlayer('+JSON.stringify(g)+");","</script>"].join("")}else{g.width=e,g.height=f;var i=['<div class="mce-object" id="',c,'" style="width:',e,"px;height:",f,'px;"></div><script type="text/javascript">',,'document.getElementById("',c,'").innerHTML = showVrsPlayer('+JSON.stringify(g)+");","</script>"].join("")}a.insertContent(i)}})}a.addButton("sohutv",{tooltip:"Insert/edit video",icon:"media",onclick:b,stateSelector:["img[data-mce-object]","span[data-mce-object]"]})});